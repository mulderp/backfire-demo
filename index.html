<html>
<head>
  <meta charset="utf-8" />

  <style>
    a {
      font-size: 11px;
      color: #3737f7;
      padding-left: 4px;
    }

    aside {
      position: absolute;
      top: 0; bottom: 0; width: 250px;
      padding-top: 20px;
      padding-left: 10px;
      background-color: #f7f7f7;
    }

    .container {
       position: relative;
       width: 550px;
       margin: 40px 0 50px 260px;
    }
  </style>

  <script src="browser/bundle.js"></script>
  <script>
    var app = require("./index");
    var $ = app.$;
    var _ = app._;
    var Backbone = app.Backbone;

    var Movies = Backbone.Firebase.Collection.extend({
      firebase: "https://movies-demo.firebaseio.com/movies"
    });
    var moviesCollection = new Movies();

    var MoviesRouter = Backbone.Router.extend({
      routes: {
        "movies/:id": "showMovie",
        "": "showAll",
      },

      showAll: function() {
        var movies = new MoviesView({collection: moviesCollection});
        movies.render();
      },

      showMovie: function(id) {
        var movie = moviesCollection.get(id);
        console.log(movie);
      }

    });

    var MoviesView = Backbone.View.extend({
      el: "#movies",
      render: function() {
        var movies = this.collection.map(function(movie) {
          return "<li>" + movie.get('title') + "<a href='#movies/" + movie.id + "'>Show</a></li>";
        });
        this.$el.html(movies);
        return this;
      },
      initialize: function() {
        this.listenTo(this.collection, 'add', this.render);
        this.listenTo(this.collection, 'all', function(ev) { console.log(ev) });
      }
    });

    $().ready(function() {
      var router = new MoviesRouter();
      Backbone.history.start();
    });
  </script>

</head>

<body>

<aside>
<ul id="movies">
</ul>
</aside>

<div class="container">
  <h2>Firebase demo <a href="#">All movies</a> </h2>
  
  
  <div id="details">
  </div>
</div>


</body>


</html>
